#!/usr/bin/env python2.7
"""Starts an instance of a Durus extended server using
the xdserver backend.

"""
import os
import logging

from schevo.xdserver import make_server

log = logging.getLogger('durus')

def main():
    path = os.environ.get('XDSERVER_ROOTDIR', '/var/db/durus27')
    host = os.environ.get('XDSERVER_HOSTNAME', '127.0.0.1')
    port = os.environ.get('XDSERVER_PORT', 22972)

    print('Starting Durus 3.9 server on durus://%s:%d' % (host, port))
    server = make_server(path, host=host, port=port)
    while True:
        server.dispatch()

if __name__ == '__main__':
    main()
