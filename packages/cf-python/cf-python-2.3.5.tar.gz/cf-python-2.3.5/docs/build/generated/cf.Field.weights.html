<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>cf.Field.weights &#8212; Documentation</title>
    
    <link rel="stylesheet" href="../_static/classic.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '2.3.3',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/copybutton.js"></script>
    <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="cf.Field.clip" href="cf.Field.clip.html" />
    <link rel="prev" title="cf.Field.var" href="cf.Field.var.html" /> 
  </head>
  <body role="document">
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="cf.Field.clip.html" title="cf.Field.clip"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="cf.Field.var.html" title="cf.Field.var"
             accesskey="P">previous</a> |</li>
  <li><a target="_blank" href="../../archive.html">Archive</a> &laquo;</li>
  <li><a target="_blank" href="http://cfpython.bitbucket.io">cf-python 2.3.3</a> &raquo;</li>
<!--
  <li><a target="_blank" href="http://cfpython.bitbucket.io">cf-python</a> &raquo;</li>
  <li><select onchange="location = this.options[this.selectedIndex].value;">

      <option value="../../1.0/index.html">1.0

      <option value="../../0.9.9/index.html">0.9.9

      <option value="../../0.9.8.3/index.html">0.9.8.3

      <option value="../../archive.html">Archive

      </select>
  </li>
-->
  
        <li class="nav-item nav-item-0"><a href="../index.html">Documentation</a> &#187;</li>

          <li class="nav-item nav-item-1"><a href="../reference.html" >Reference manual</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="../class.html" >Classes of the <code class="docutils literal"><span class="pre">cf</span></code> module</a> &#187;</li>
          <li class="nav-item nav-item-3"><a href="../classes/cf.Field.html" accesskey="U">cf.Field</a> &#187;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="cf-field-weights">
<h1>cf.Field.weights<a class="headerlink" href="#cf-field-weights" title="Permalink to this headline">¶</a></h1>
<dl class="method">
<dt id="cf.Field.weights">
<code class="descclassname">Field.</code><code class="descname">weights</code><span class="sig-paren">(</span><em>weights='auto'</em>, <em>scale=False</em>, <em>components=False</em>, <em>methods=False</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference external" href="https://bitbucket.org/cfpython/cf-python/src/v2.3.3/cf/field.py#field.py-4201"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#cf.Field.weights" title="Permalink to this definition">¶</a></dt>
<dd><p>Return weights for the data array values.</p>
<p>The weights are those used during a statistical collapse of the
data. For example when computing a area weight average.</p>
<p>Weights for any combination of axes may be returned.</p>
<p>Weights are either derived from the field&#8217;s metadata (such as
coordinate cell sizes) or provided explicitly in the form of other
<a class="reference internal" href="../classes/cf.Field.html#cf.Field" title="cf.Field"><code class="xref py py-obj docutils literal"><span class="pre">cf.Field</span></code></a> objects. In any case, the outer product of these weights
components is returned in a field which is broadcastable to the
orginal field (see the <em>components</em> parameter for returning the
components individually).</p>
<p>By default null, equal weights are returned.</p>
<div class="versionadded">
<p><span class="versionmodified">New in version 1.0.</span></p>
</div>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><a class="reference internal" href="cf.Field.cell_area.html#cf.Field.cell_area" title="cf.Field.cell_area"><code class="xref py py-obj docutils literal"><span class="pre">cell_area</span></code></a>, <a class="reference internal" href="cf.Field.collapse.html#cf.Field.collapse" title="cf.Field.collapse"><code class="xref py py-obj docutils literal"><span class="pre">collapse</span></code></a></p>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Examples 1:</th><td class="field-body"></td>
</tr>
</tbody>
</table>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">g</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">weights</span><span class="p">()</span>
</pre></div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first docutils">
<dt>weights, kwargs: <em>optional</em></dt>
<dd><blockquote class="first">
<div><p>Specify the weights to be created. There are two distinct
methods: <strong>type 1</strong> will always succeed in creating weights
for all axes of the field, at the expense of not always being
able to control exactly how the weights are created (see the
<em>methods</em> parameter); <strong>type 2</strong> allows particular types of
weights to be defined for particular axes and an exception
will be raised if it is not possible to the create weights.</p>
<blockquote>
<div><ul>
<li><p class="first"><strong>Type 1</strong>: <em>weights</em> may be one of:</p>
<blockquote>
<div><table border="1" class="docutils">
<colgroup>
<col width="19%" />
<col width="81%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head"><em>weights</em></th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><a class="reference external" href="https://docs.python.org/2.7/library/constants.html#None" title="(in Python v2.7)"><code class="xref py py-obj docutils literal"><span class="pre">None</span></code></a></td>
<td>Equal weights for all axes. This the
default.</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">'auto'</span></code></td>
<td><p class="first">Weights are created for non-overlapping
subsets of the axes by the methods
enumerated in the above notes. Set the
<em>methods</em> parameter to find out how the
weights were actually created.</p>
<p>In this case weights components are created
for all axes of the field by one or more of
the following methods, in order of
preference,</p>
<blockquote>
<div><ol class="arabic simple">
<li>Volume cell measures</li>
<li>Area cell measures</li>
<li>Area calculated from (grid) latitude
and (grid) longitude dimension
coordinates with bounds</li>
<li>Cell sizes of dimension coordinates
with bounds</li>
<li>Equal weights</li>
</ol>
</div></blockquote>
<p class="last">and the outer product of these weights
components is returned in a field which is
broadcastable to the orginal field (see the
<em>components</em> parameter).</p>
</td>
</tr>
</tbody>
</table>
</div></blockquote>
</li>
</ul>
</div></blockquote>
</div></blockquote>
<blockquote class="last">
<div><ul>
<li><p class="first"><strong>Type 2</strong>: <em>weights</em> may be one, or a sequence, of:</p>
<blockquote>
<div><table border="1" class="docutils">
<colgroup>
<col width="22%" />
<col width="78%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head"><em>weights</em></th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><code class="docutils literal"><span class="pre">'area'</span></code></td>
<td>Cell area weights from the field&#8217;s area
cell measure construct or, if one doesn&#8217;t
exist, from (grid) latitude and (grid)
longitude dimension coordinates. Set the
<em>methods</em> parameter to find out how the
weights were actually created.</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">'volume'</span></code></td>
<td>Cell volume weights from the field&#8217;s
volume cell measure construct.</td>
</tr>
<tr class="row-even"><td>items</td>
<td>Weights from the cell sizes of the
dimension coordinate objects that would be
selected by this call of the field&#8217;s
<a class="reference internal" href="cf.Field.dims.html#cf.Field.dims" title="cf.Field.dims"><code class="xref py py-obj docutils literal"><span class="pre">dims</span></code></a> method: <code class="docutils literal"><span class="pre">f.dims(items,</span>
<span class="pre">**kwargs)</span></code>. See <a class="reference internal" href="cf.Field.dims.html#cf.Field.dims" title="cf.Field.dims"><code class="xref py py-obj docutils literal"><span class="pre">cf.Field.dims</span></code></a> for
details.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="../classes/cf.Field.html#cf.Field" title="cf.Field"><code class="xref py py-obj docutils literal"><span class="pre">cf.Field</span></code></a></td>
<td>Take weights from the data array of
another field, which must be broadcastable
to this field.</td>
</tr>
</tbody>
</table>
</div></blockquote>
<p>If <em>weights</em> is a sequence of any combination of the above
then the returned field contains the outer product of the
weights defined by each element of the sequence. The
ordering of the sequence is irrelevant.</p>
<blockquote>
<div><dl class="docutils">
<dt><em>Example:</em></dt>
<dd><p class="first last">To create to 2-dimensional weights based on cell
areas: <code class="docutils literal"><span class="pre">f.weights('area')</span></code>. To create to
3-dimensional weights based on cell areas and linear
height: <code class="docutils literal"><span class="pre">f.weights(['area',</span> <span class="pre">'Z'])</span></code>.</p>
</dd>
</dl>
</div></blockquote>
</li>
</ul>
</div></blockquote>
</dd>
<dt>scale: <a class="reference external" href="https://docs.python.org/2.7/library/functions.html#bool" title="(in Python v2.7)"><code class="xref py py-obj docutils literal"><span class="pre">bool</span></code></a>, optional</dt>
<dd><p class="first last">If True then scale the returned weights so that they are less
than or equal to 1.</p>
</dd>
<dt>components: <a class="reference external" href="https://docs.python.org/2.7/library/functions.html#bool" title="(in Python v2.7)"><code class="xref py py-obj docutils literal"><span class="pre">bool</span></code></a>, optional</dt>
<dd><p class="first last">If True then a dictionary of orthogonal weights components is
returned instead of a field. Each key is a tuple of integers
representing axes positions in the field&#8217;s data array with
corresponding values of weights in <a class="reference internal" href="../classes/cf.Data.html#cf.Data" title="cf.Data"><code class="xref py py-obj docutils literal"><span class="pre">cf.Data</span></code></a> objects. The axes
of weights match the axes of the field&#8217;s data array in the
order given by their dictionary keys.</p>
</dd>
<dt>methods: <a class="reference external" href="https://docs.python.org/2.7/library/functions.html#bool" title="(in Python v2.7)"><code class="xref py py-obj docutils literal"><span class="pre">bool</span></code></a>, optional</dt>
<dd><p class="first last">If True, then return a dictionary describing methods used to
create the weights.</p>
</dd>
</dl>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><dl class="first docutils">
<dt>out: <a class="reference internal" href="../classes/cf.Field.html#cf.Field" title="cf.Field"><code class="xref py py-obj docutils literal"><span class="pre">cf.Field</span></code></a> or <a class="reference external" href="https://docs.python.org/2.7/library/stdtypes.html#dict" title="(in Python v2.7)"><code class="xref py py-obj docutils literal"><span class="pre">dict</span></code></a></dt>
<dd><p class="first last">The weights field or, if <em>components</em> is True, orthogonal
weights in a dictionary.</p>
</dd>
</dl>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Examples 2:</th><td class="field-body"></td>
</tr>
</tbody>
</table>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">f</span>
<span class="go">&lt;CF Field: air_temperature(time(1800), latitude(145), longitude(192)) K&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">f</span><span class="o">.</span><span class="n">weights</span><span class="p">()</span>
<span class="go">&lt;CF Field: long_name:weight(time(1800), latitude(145), longitude(192)) 86400 s.rad&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">f</span><span class="o">.</span><span class="n">weights</span><span class="p">(</span><span class="s1">&#39;auto&#39;</span><span class="p">,</span> <span class="n">scale</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="go">&lt;CF Field: long_name:weight(time(1800), latitude(145), longitude(192)) 1&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">f</span><span class="o">.</span><span class="n">weights</span><span class="p">(</span><span class="s1">&#39;auto&#39;</span><span class="p">,</span> <span class="n">components</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="go">{(0,): &lt;CF Data: [1.0, ..., 1.0] d&gt;,</span>
<span class="go"> (1,): &lt;CF Data: [5.94949998503e-05, ..., 5.94949998503e-05]&gt;,</span>
<span class="go"> (2,): &lt;CF Data: [0.0327249234749, ..., 0.0327249234749] radians&gt;}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">f</span><span class="o">.</span><span class="n">weights</span><span class="p">(</span><span class="s1">&#39;auto&#39;</span><span class="p">,</span> <span class="n">components</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">scale</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="go">{(0,): &lt;CF Data: [1.0, ..., 1.0]&gt;,</span>
<span class="go"> (1,): &lt;CF Data: [0.00272710399807, ..., 0.00272710399807]&gt;,</span>
<span class="go"> (2,): &lt;CF Data: [1.0, ..., 1.0]&gt;}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">f</span><span class="o">.</span><span class="n">weights</span><span class="p">(</span><span class="s1">&#39;auto&#39;</span><span class="p">,</span> <span class="n">methods</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="go">{(0,): &#39;linear time&#39;,</span>
<span class="go"> (1,): &#39;linear sine latitude&#39;,</span>
<span class="go"> (2,): &#39;linear longitude&#39;}</span>
</pre></div>
</div>
</dd></dl>

</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h4>Previous topic</h4>
  <p class="topless"><a href="cf.Field.var.html"
                        title="previous chapter">cf.Field.var</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="cf.Field.clip.html"
                        title="next chapter">cf.Field.clip</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../_sources/generated/cf.Field.weights.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="../search.html" method="get">
      <div><input type="text" name="q" /></div>
      <div><input type="submit" value="Go" /></div>
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="cf.Field.clip.html" title="cf.Field.clip"
             >next</a> |</li>
        <li class="right" >
          <a href="cf.Field.var.html" title="cf.Field.var"
             >previous</a> |</li>
  <li><a target="_blank" href="../../archive.html">Archive</a> &laquo;</li>
  <li><a target="_blank" href="http://cfpython.bitbucket.io">cf-python 2.3.3</a> &raquo;</li>
<!--
  <li><a target="_blank" href="http://cfpython.bitbucket.io">cf-python</a> &raquo;</li>
  <li><select onchange="location = this.options[this.selectedIndex].value;">

      <option value="../../1.0/index.html">1.0

      <option value="../../0.9.9/index.html">0.9.9

      <option value="../../0.9.8.3/index.html">0.9.8.3

      <option value="../../archive.html">Archive

      </select>
  </li>
-->
  
        <li class="nav-item nav-item-0"><a href="../index.html">Documentation</a> &#187;</li>

          <li class="nav-item nav-item-1"><a href="../reference.html" >Reference manual</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="../class.html" >Classes of the <code class="docutils literal"><span class="pre">cf</span></code> module</a> &#187;</li>
          <li class="nav-item nav-item-3"><a href="../classes/cf.Field.html" >cf.Field</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2016, David Hassell.
      Last updated on Mar 18, 2019.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.5.1.
    </div>
  </body>
</html>