.\" Man page generated from reStructuredText.
.
.TH RTSTART 1 "2015-08-13" "4.0" "User commands"
.SH NAME
rtstart \- RTシステムを起動する
.
.nr rst2man-indent-level 0
.
.de1 rstReportMargin
\\$1 \\n[an-margin]
level \\n[rst2man-indent-level]
level margin: \\n[rst2man-indent\\n[rst2man-indent-level]]
-
\\n[rst2man-indent0]
\\n[rst2man-indent1]
\\n[rst2man-indent2]
..
.de1 INDENT
.\" .rstReportMargin pre:
. RS \\$1
. nr rst2man-indent\\n[rst2man-indent-level] \\n[an-margin]
. nr rst2man-indent-level +1
.\" .rstReportMargin post:
..
.de UNINDENT
. RE
.\" indent \\n[an-margin]
.\" old: \\n[rst2man-indent\\n[rst2man-indent-level]]
.nr rst2man-indent-level -1
.\" new: \\n[rst2man-indent\\n[rst2man-indent-level]]
.in \\n[rst2man-indent\\n[rst2man-indent-level]]u
..
.SH 書式
.sp
rtstart [options] [RTSProfile file]
.SH 概要
.sp
すべてのコンポーネントを activate することによってRTSProfileに保存され
たRTシステムを起動します。コンポーネントはRTSProfileが指定された順番に
activate されます。RTSProfileに「必要」と
指定されておらず実行中ではないコンポーネントは無視します。
.sp
ファイル名を指定しない場合、RTSProfileをstdinから読みます。
.SH オプション
.INDENT 0.0
.TP
.B \-\-dry\-run
実行する内容を表示する（実際には起動は行われない）
.TP
.B \-x\fP,\fB  \-\-xml
XMLフォーマットを使う
.TP
.B \-y\fP,\fB  \-\-yaml
YAMLフォーマットを使う
.UNINDENT
.INDENT 0.0
.TP
.B \-\-version
プログラムのバージョン番号を表示して終了する
.TP
.B \-h\fP,\fB  \-\-help
ヘルプを表示して終了する
.TP
.B \-v\fP,\fB  \-\-verbose
冗長な情報を出力する [デフォルト： \fBFalse\fP]
.UNINDENT
.SH ステート変更のプラン
.sp
RTSProfileには、RTシステムのコンポーネントの開始/停止の指示も指定できる
ことが定義されています。コンポーネントを開始/停止の順番を指示するこが可
能です。コンポーネント間で依存関係がある場合(例えば、あるコンポーネント
の開始後に、もう一方のコンポーネントを開始する必要がある場合)に、その順
番を指定することが可能です。
.sp
\fBrtstart(1)\fP と \fBrtstop(1)\fP はこの情報を利用します。 \fBrtstart\fP は
\fBActivation\fP ブロックに含まれていた情報を利用して、 \fBrtstop\fP は
\fBDeactivation\fP ブロックに含まれていた情報を利用します。実行された時、そ
れらは全システムの状態の変更のために計画を構築し実行します。エラーが出る
か計画が完成まで止まりません。
.sp
\fB\-\-dry\-run\fP というオプションを追加すると計画は表示されますが実行はしません。
計画の出力は以下のようです:
.INDENT 0.0
.INDENT 3.5
.sp
.nf
.ft C
{1} Activate /localhost/ConfigSample0.rtc in execution context 0 (Required)
{2} [Order 1] Activate /localhost/Motor0.rtc in execution context 0 (Required)
{4} [Order 3/Wait 5000ms] Activate /localhost/Controller0.rtc in execution context 0 (Required)
{3} [Order 2/Sync to Motor0, Order 5/Sync to Controller0] Activate /localhost/Sensor0.rtc in execution context 0 (Required)
{5} [Order 4/After ConfigSample0\(aqs action] Activate /localhost/ConsoleIn0.rtc in execution context 0 (Required)
.ft P
.fi
.UNINDENT
.UNINDENT
.sp
各ラインの初めの括弧の中の数は*アクションID*です。これらは実行の時にも表
示され、アクションの簡単な識別は可能です。
.sp
続いて、角括弧中の値が出る可能性はあります。これは、実行されているアク
ションに関するどんな*前条件*を示します:
.INDENT 0.0
.INDENT 3.5
.INDENT 0.0
.TP
.B Order
順番を管理します。RTSProfile の condition の rts:sequence 値で設定可
能です。他の前条件がない場合、アクションはこの順番によって実行します。
.TP
.B Wait
指定された時間が経過した後にアクションが実行されます。
.TP
.B Sync
指定されたコンポーネントが目的状態に達するまで、アクションを実行しません。
.TP
.B After
\fBSync\fP と似てます。違いは、指定されたアクションが別のコンポーネント
上で最初に行なわれるのを待つということです。言いかえれば、そのアクシ
ョンは、コンポーネントが目標状態に達する前でも、別のコンポーネントの
アクションが行われれば実行されます。
.UNINDENT
.UNINDENT
.UNINDENT
.sp
ラインの残りはアクションの説明です。
.SH パス
.sp
\fBrtshell\fP は \fIパス\fP でRTCツリーのオブジェクトを示します。パスは
オブジェクトのアドレスです。ネームサーバとネームコンテクストは
ダイレクトリで、マネージャとRTコンポーネントはファイルです。POSIXの
\fBcat\fP 等のコマンドと同じように、コマンドに渡したパスはrtshellの
ワーキングディレクトリに追加されます。rtshellの現在のワーキングディレクトリは
\fBRTCSH_CWD\fP という環境変数に保存されて、 \fBrtcwd\fP というコマンドで
変更することができます。
.sp
利用できるパスはコマンド実行時のネームサーバによって変わります。
\fBRTCSH_NAMESERVERS\fP という環境変数の値に記録されたネームサーバとパスに
指定された ネームサーバを組み合わせて提供します。
.sp
例えば、 \fB/localhost/comp0.rtc\fP は \fBlocalhost\fP にあるネームサーバに登録
された \fBcomp0.rtc\fP というRTコンポーネントを示します。
\fB/localhost/manager/comp0.rtc\fP は \fBlocalhost\fP にあるネームサーバの下の
\fBmanager\fP というディレクトリに登録された \fBcomp0.rtc\fP というRT
コンポーネントを示します。 \fB\&./comp0.rtc\fP は現在のワーキングディレクトリ
の中にある \fBcomp0.rtc\fP というRTコンポーネントを示します。
.sp
RTコンポーネントのポートを示す場合、パスの後にコロン（「:」）で区切って
示します。例えば、 \fB/localhost/comp0.rtc:data\fP は
\fBcomp0.rtc\fP というRTコンポーネントの \fBdata\fP というポートを示します。
.sp
新しいポートを作るコマンドもあります。この場合、オプションをパスに追加
することができます。使えるオプションは作られるポートの名前とフォーマッタ
です。指定方法は以下の通りです:
.INDENT 0.0
.INDENT 3.5
.sp
.nf
.ft C
path:port.name#formatter
.ft P
.fi
.UNINDENT
.UNINDENT
.sp
例:
.INDENT 0.0
.INDENT 3.5
.sp
.nf
.ft C
/localhost/blurg.host_cxt/comp0.rtc:input.stuff#a_printer
.ft P
.fi
.UNINDENT
.UNINDENT
.sp
作られるポートの名前は \fBstuff\fP で、データは \fBa_printer\fP という関数で
ターミナルに表示するように指定してます。（ \fBa_printer\fP の関数はPythonが利
用可能な場所に存在する必要があります。普通はユーザがモジュールで提供します。）
作られたポートは \fBcomp0.rtc\fP の \fBinput\fP というポートに接続します。
.sp
「name」という部分は必須ではありません。書いていない場合は「.」文字も
書かないでください。例:
.INDENT 0.0
.INDENT 3.5
.sp
.nf
.ft C
/localhost/blurg.host_cxt/comp0.rtc:input#a_printer
.ft P
.fi
.UNINDENT
.UNINDENT
.sp
「formatter」という部分は必須ではありません。書いていない場合は「.」文字も
書かないでください。例:
.INDENT 0.0
.INDENT 3.5
.sp
.nf
.ft C
/localhost/blurg.host_cxt/comp0.rtc:input.stuff
.ft P
.fi
.UNINDENT
.UNINDENT
.SH 環境変数
.INDENT 0.0
.INDENT 3.5
.INDENT 0.0
.TP
.B RTCTREE_ORB_ARGS
ORBを作る時に渡す変数です。セミコロンで区切ります。必須ではありません。
.TP
.B RTCTREE_NAMESERVERS
RTCツリーを作る時に参照するネームサーバのアドレスです。アドレスをセミ
コロンで区切ります。リストされたアドレスはすべてRTCツリーに追加して
rtshellで見ることができるようになります。必須ではありません。
.TP
.B RTSH_CWD
rtshellの現在のワーキングディレクトリ。rtshellが自動的に設定します。
設定しないでください。
.UNINDENT
.UNINDENT
.UNINDENT
.sp
普通、ユーザが設定する変数は \fBRTCTREE_NAMESERVERS\fP のみです。よく使うネ
ームサーバを設定しておくと便利です。例えば、Bashシェルの場合、以下のコマンド
は \fBlocalhost\fP 、 \fB192.168.0.1:65346\fP および \fBexample.com\fP にあるネーム
サーバをいつもrtshellで利用できるようにします。
.INDENT 0.0
.INDENT 3.5
$ export RTCTREE_NAMESERVERS=localhost;192.168.0.1:65346;example.com
.UNINDENT
.UNINDENT
.SH 返り値
.sp
成功の場合はゼロを返します。失敗の場合はゼロではない値を返します。
.sp
デバグ情報とエラーは \fBstderr\fP に出します。
.SH 例
.INDENT 0.0
.INDENT 3.5
.sp
.nf
.ft C
$ rtstart sys.rtsys
.ft P
.fi
.UNINDENT
.UNINDENT
.sp
\fBsys.rtsys\fP というファイルに保存されたRTシステムを起動します。
.INDENT 0.0
.INDENT 3.5
.sp
.nf
.ft C
$ rtstart sys.rtsys \-\-dry\-run
.ft P
.fi
.UNINDENT
.UNINDENT
.sp
\fBsys.rtsys\fP というファイルに保存されたRTシステムを起動するために何を
するかを表示します。（実際には起動されません。）
.SH 参照
.INDENT 0.0
.INDENT 3.5
\fBrtcheck\fP (1),
\fBrtresurrect\fP (1),
\fBrtstop\fP (1)
.UNINDENT
.UNINDENT
.SH AUTHOR
Geoffrey Biggs and contributors
.SH COPYRIGHT
LGPL3
.\" Generated by docutils manpage writer.
.
