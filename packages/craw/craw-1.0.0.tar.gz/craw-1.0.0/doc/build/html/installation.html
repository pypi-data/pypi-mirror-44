
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <title>Installation &#8212; Counter RNAseq Window 1.0.0 documentation</title>
    <link rel="stylesheet" href="_static/style.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="_static/language_data.js"></script>
    <script async="async" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Quick start" href="quickstart.html" />
    <link rel="prev" title="overview" href="overview.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="quickstart.html" title="Quick start"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="overview.html" title="overview"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">Counter RNAseq Window 1.0.0 documentation</a> &#187;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="installation">
<span id="id1"></span><h1>Installation<a class="headerlink" href="#installation" title="Permalink to this headline">¶</a></h1>
<p>There are 3 ways to use craw:
* by install the standalone python scripts
* by using docker image
* by using singularity image</p>
<div class="section" id="craw-installation">
<h2>CRAW installation<a class="headerlink" href="#craw-installation" title="Permalink to this headline">¶</a></h2>
<div class="section" id="requirements">
<h3>Requirements<a class="headerlink" href="#requirements" title="Permalink to this headline">¶</a></h3>
<div class="section" id="for-craw-coverage">
<h4>For craw_coverage<a class="headerlink" href="#for-craw-coverage" title="Permalink to this headline">¶</a></h4>
<blockquote>
<div><ul class="simple">
<li><p>python &gt;= 3.5</p></li>
<li><p>pysam &gt;= 0.15.2</p></li>
</ul>
</div></blockquote>
</div>
<div class="section" id="for-craw-htmp">
<h4>For craw_htmp<a class="headerlink" href="#for-craw-htmp" title="Permalink to this headline">¶</a></h4>
<blockquote>
<div><ul class="simple">
<li><p>python &gt;= 3.5</p></li>
<li><p>pysam == 0.15.2</p></li>
<li><p>pandas &gt;= 0.24</p></li>
<li><p>numpy &gt;= 1.16</p></li>
<li><p>matplotlib &gt;= 3.0</p></li>
<li><p>pillow &gt;= 5.4</p></li>
<li><p>scipy &gt;= 0.16.1</p></li>
</ul>
</div></blockquote>
</div>
</div>
<div class="section" id="id2">
<h3>Installation<a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h3>
<div class="section" id="installation-from-package">
<h4>Installation from package<a class="headerlink" href="#installation-from-package" title="Permalink to this headline">¶</a></h4>
<p>Using pip</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pip</span> <span class="n">install</span> <span class="n">craw</span>
</pre></div>
</div>
<p>Do not forget to configure the <cite>matplotlib</cite> backend, specially if you use virtualenv.
Otherwise on some platform there won’t any output.
See <a class="reference internal" href="#matplotlibrc"><span class="std std-ref">matplotlib configuration</span></a> for more explanation.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>On MacOS install python &gt; 3 from image on <a class="reference external" href="http://python.org">http://python.org</a> . Then
install craw using pip</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pip3</span> <span class="n">install</span> <span class="n">craw</span>
</pre></div>
</div>
<p>craw will be installed in <cite>/Library/Framework/Python.Framework/Version/3.6/</cite>
So if you want to use directly craw_coverage and craw_htmp just create a symbolic linc like this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ln</span> <span class="o">-</span><span class="n">s</span> <span class="o">/</span><span class="n">Library</span><span class="o">/</span><span class="n">Framework</span><span class="o">/</span><span class="n">Python</span><span class="o">.</span><span class="n">Framework</span><span class="o">/</span><span class="n">Version</span><span class="o">/</span><span class="mf">3.6</span><span class="o">/</span><span class="nb">bin</span><span class="o">/</span><span class="n">craw_coverage</span> <span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">local</span><span class="o">/</span><span class="nb">bin</span><span class="o">/</span><span class="n">craw_coverage</span>
<span class="n">ln</span> <span class="o">-</span><span class="n">s</span> <span class="o">/</span><span class="n">Library</span><span class="o">/</span><span class="n">Framework</span><span class="o">/</span><span class="n">Python</span><span class="o">.</span><span class="n">Framework</span><span class="o">/</span><span class="n">Version</span><span class="o">/</span><span class="mf">3.6</span><span class="o">/</span><span class="nb">bin</span><span class="o">/</span><span class="n">craw_htmp</span> <span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">local</span><span class="o">/</span><span class="nb">bin</span><span class="o">/</span><span class="n">craw_htmp</span>
</pre></div>
</div>
<p>The documentation (html and pdf) is located in /Library/Framework/Python.Framework/Version/3.6/share/craw/</p>
</div>
</div>
<div class="section" id="installation-from-repository">
<h4>Installation from repository<a class="headerlink" href="#installation-from-repository" title="Permalink to this headline">¶</a></h4>
<p>To get the last version, clone the project and install with the setup.py</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">git</span> <span class="n">clone</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">gitlab</span><span class="o">.</span><span class="n">pasteur</span><span class="o">.</span><span class="n">fr</span><span class="o">/</span><span class="n">bneron</span><span class="o">/</span><span class="n">craw</span><span class="o">.</span><span class="n">git</span>
<span class="n">cd</span> <span class="n">craw</span>
<span class="n">pip</span> <span class="n">install</span> <span class="o">.</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Instead of installing craw you can directly use the scripts from the repository.
You can also use the package without installing it.
To do this, you have to export the <strong>CRAW_HOME</strong> environment variable.
<cite>CRAW_HOME</cite> must point to the <cite>src</cite> directory of the project.
Then you can use <cite>craw_coverage</cite> and <cite>craw_htmp</cite> scripts located in <cite>bin</cite> directory.</p>
</div>
<p>This project is documented using <a class="reference external" href="http://www.sphinx-doc.org/en/stable/index.html">sphinx</a>.
So if you use a clone, you have to generate the documentation from the source.</p>
<p>The project come from with some unit and functional tests.
to test if everything work fine.</p>
<blockquote>
<div><p>cd $CRAW_HOME
python3 tests/run_tests.py -vvv</p>
</div></blockquote>
<div class="section" id="matplotlib-configuration">
<span id="matplotlibrc"></span><h5>matplotlib configuration<a class="headerlink" href="#matplotlib-configuration" title="Permalink to this headline">¶</a></h5>
<p><cite>matplotlib</cite> is a python library to create graphics.
<cite>craw_htmp</cite> use this library to generate heat map.
The two parameters to configure for craw is:</p>
<blockquote>
<div><ul class="simple">
<li><p>the backend</p></li>
<li><p>figure.dpi</p></li>
</ul>
</div></blockquote>
</div>
<div class="section" id="backend">
<h5>backend<a class="headerlink" href="#backend" title="Permalink to this headline">¶</a></h5>
<p>matplolib lay on low level graphic library of youre computer. This library will determine
the graphical formats manage by matplotlib and  then by craw_htmp. Most of backend handle <cite>png</cite>
but some library like <cite>Qt</cite> can handle ‘jpeg’, ‘eps’, <cite>pdf</cite> …</p>
<p>In your <cite>matplolibrc</cite> file you must define the backend for instance to use Qt5</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">backend</span><span class="p">:</span> <span class="n">qt5agg</span>
</pre></div>
</div>
<p>An example of matplolibrc file and all supported backend is available here:
<a class="reference external" href="http://matplotlib.org/users/customizing.html#a-sample-matplotlibrc-file">http://matplotlib.org/users/customizing.html#a-sample-matplotlibrc-file</a></p>
</div>
<div class="section" id="figure-dpi">
<h5>figure.dpi<a class="headerlink" href="#figure-dpi" title="Permalink to this headline">¶</a></h5>
<p>It’s not an essential option but <cite>matplolib</cite> and <cite>craw_htmp</cite> will produce better graphic (on screen)
if you configure <cite>matplotlib</cite> to the native resolution of your screen.
To know the resolution of your screen you can visit the following page <a class="reference external" href="https://www.infobyip.com/detectmonitordpi.php">https://www.infobyip.com/detectmonitordpi.php</a>
and report the resolution (for 1 inch) in <cite>matplotlibrc</cite> file like:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">figure</span><span class="o">.</span><span class="n">dpi</span><span class="p">:</span> <span class="mi">96</span>
</pre></div>
</div>
<p>For full explanation on how to configure matplotlib read
<a class="reference external" href="http://matplotlib.org/users/customizing.html#the-matplotlibrc-file">http://matplotlib.org/users/customizing.html#the-matplotlibrc-file</a>.</p>
</div>
</div>
</div>
</div>
<div class="section" id="using-docker-image">
<h2>Using Docker Image<a class="headerlink" href="#using-docker-image" title="Permalink to this headline">¶</a></h2>
<p>Docker images are available. The two scripts are accessible through the sub-command <cite>coverage</cite> or <cite>htmp</cite>.
For instance to use the latest version of craw_htmp:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>docker pull c3bi/craw
docker run -v$PWD:/root -it c3bi/craw coverage --bam foo.bam --annot foo.annot --ref-col &#39;Position&#39; --before 3 --after 5 --out foo.cov
docker run -v$PWD:/root -it c3bi/craw htmp --size raw --out foo.png  foo.cov
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>In docker the interactive htmp output is not available.
So you must specify the –out option</p>
</div>
</div>
<div class="section" id="using-singularity-image">
<h2>Using Singularity Image<a class="headerlink" href="#using-singularity-image" title="Permalink to this headline">¶</a></h2>
<p>Singularity images are available. The two scripts are accessible through the sub-command <cite>coverage</cite> or <cite>htmp</cite>.
For instance to use the latest version of craw_htmp:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">singularity</span> <span class="n">pull</span> <span class="o">--</span><span class="n">name</span> <span class="n">craw</span> <span class="n">shub</span><span class="p">:</span><span class="o">//</span><span class="n">c3bi</span><span class="o">/</span><span class="n">craw</span>
<span class="o">./</span><span class="n">craw</span> <span class="n">coverage</span> <span class="o">--</span><span class="n">bam</span> <span class="n">foo</span><span class="o">.</span><span class="n">bam</span> <span class="o">--</span><span class="n">annot</span> <span class="n">foo</span><span class="o">.</span><span class="n">annot</span> <span class="o">--</span><span class="n">ref</span><span class="o">-</span><span class="n">col</span> <span class="s1">&#39;Position&#39;</span> <span class="o">--</span><span class="n">before</span> <span class="mi">3</span> <span class="o">--</span><span class="n">after</span> <span class="mi">5</span> <span class="o">--</span><span class="n">out</span> <span class="n">foo</span><span class="o">.</span><span class="n">cov</span>
<span class="o">./</span><span class="n">craw</span> <span class="n">htmp</span> <span class="o">--</span><span class="n">size</span> <span class="n">raw</span> <span class="o">--</span><span class="n">out</span> <span class="n">foo</span><span class="o">.</span><span class="n">png</span>  <span class="n">foo</span><span class="o">.</span><span class="n">cov</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>instead of Docker images, in Singularity images the interactive output is available.</p>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Installation</a><ul>
<li><a class="reference internal" href="#craw-installation">CRAW installation</a><ul>
<li><a class="reference internal" href="#requirements">Requirements</a><ul>
<li><a class="reference internal" href="#for-craw-coverage">For craw_coverage</a></li>
<li><a class="reference internal" href="#for-craw-htmp">For craw_htmp</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id2">Installation</a><ul>
<li><a class="reference internal" href="#installation-from-package">Installation from package</a></li>
<li><a class="reference internal" href="#installation-from-repository">Installation from repository</a><ul>
<li><a class="reference internal" href="#matplotlib-configuration">matplotlib configuration</a></li>
<li><a class="reference internal" href="#backend">backend</a></li>
<li><a class="reference internal" href="#figure-dpi">figure.dpi</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#using-docker-image">Using Docker Image</a></li>
<li><a class="reference internal" href="#using-singularity-image">Using Singularity Image</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="overview.html"
                        title="previous chapter">overview</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="quickstart.html"
                        title="next chapter">Quick start</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/installation.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="quickstart.html" title="Quick start"
             >next</a> |</li>
        <li class="right" >
          <a href="overview.html" title="overview"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">Counter RNAseq Window 1.0.0 documentation</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2017-2019, Bertrand Néron.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 2.0.0.
    </div>
  </body>
</html>